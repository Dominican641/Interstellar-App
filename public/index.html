<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interstellar App</title>
</head>
<body>
  <form id="uv-form">
    <input type="text" id="uv-address" placeholder="Enter URL">
    <input type="text" id="uv-search-engine" placeholder="Search Engine">
    <button type="submit">Go</button>
  </form>

  <script>
    /**
     * @type {HTMLFormElement}
     */
    const form = document.getElementById("uv-form");
    /**
     * @type {HTMLInputElement}
     */
    const address = document.getElementById("uv-address");
    /**
     * @type {HTMLInputElement}
     */
    const searchEngine = document.getElementById("uv-search-engine");
    /**
     * @type {HTMLParagraphElement}
     */
    const error = document.getElementById("uv-error");
    /**
     * @type {HTMLPreElement}
     */
    const errorCode = document.getElementById("uv-error-code");

    form.addEventListener("submit", async (event) => {
      event.preventDefault();

      try {
        await registerSW();
      } catch (err) {
        error.textContent = "Failed to register service worker.";
        errorCode.textContent = err.toString();
        throw err;
      }

      const url = search(address.value, searchEngine.value);

      const newTab = window.open();
      newTab.opener = null;
      newTab.location.href = __uv$config.prefix + __uv$config.encodeUrl(url);
    });
  </script>
</body>
</html>
